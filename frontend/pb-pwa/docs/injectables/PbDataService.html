<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>pb-pwa documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">pb-pwa documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>PbDataService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/service/pb-data/pb-data.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>DataService -
Service providing interface to fetch, access and
handle data within application</p>

            </p>


            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_config">_config</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$apollo">$apollo</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$auth">$auth</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$contracts">$contracts</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$env">$env</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$logs">$logs</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$market">$market</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$messages">$messages</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$orders">$orders</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$signals">$signals</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#$trades">$trades</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#allow">allow</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#app">app</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#appSubscribtion">appSubscribtion</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#pollingTimer$">pollingTimer$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#connect">connect</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#disconnect">disconnect</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                    <span class="modifier">Async</span>
                                <a href="#fetchApplicationData">fetchApplicationData</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getPollingTimer">getPollingTimer</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isConnecting">isConnecting</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#setAppEnv">setAppEnv</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#setServiceConfiguration">setServiceConfiguration</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#wrapApiServiceMethodes">wrapApiServiceMethodes</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#wrapMethode">wrapMethode</a>
                            </li>
                        </ul>
                    </td>
                </tr>





                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#configuration">configuration</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor($log: FgLogService, $auth: <a href="../injectables/AuthenticationService.html">AuthenticationService</a>, $contracts: <a href="../injectables/ContractService.html">ContractService</a>, $logs: <a href="../injectables/LogsService.html">LogsService</a>, $market: <a href="../injectables/MarketService.html">MarketService</a>, $messages: <a href="../injectables/MessagesService.html">MessagesService</a>, $orders: <a href="../injectables/OrdersService.html">OrdersService</a>, $signals: <a href="../injectables/SignalsService.html">SignalsService</a>, $trades: <a href="../injectables/TradesService.html">TradesService</a>, $apollo: <a href="../injectables/FgGraphqlService.html">FgGraphqlService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:64</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructor</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>$log</td>
                                                  
                                                        <td>
                                                                    <code>FgLogService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$auth</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/AuthenticationService.html" target="_self" >AuthenticationService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$contracts</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/ContractService.html" target="_self" >ContractService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$logs</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/LogsService.html" target="_self" >LogsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$market</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/MarketService.html" target="_self" >MarketService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$messages</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/MessagesService.html" target="_self" >MessagesService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$orders</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/OrdersService.html" target="_self" >OrdersService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$signals</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/SignalsService.html" target="_self" >SignalsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$trades</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/TradesService.html" target="_self" >TradesService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>$apollo</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/FgGraphqlService.html" target="_self" >FgGraphqlService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="connect"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            connect
                            </b>
                            <a href="#connect"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>connect(env: <a href="../undefineds/AppEnv.html">AppEnv</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="281" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:281</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Connect application-data service</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>env</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#AppEnv" target="_self" >AppEnv</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="disconnect"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            disconnect
                            </b>
                            <a href="#disconnect"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>disconnect()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="291" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:291</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Disconnect application-data service</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="fetchApplicationData"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                                <span class="modifier">Async</span>
                            fetchApplicationData
                            </b>
                            <a href="#fetchApplicationData"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>fetchApplicationData()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="301" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:301</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Fetch full set of application-data from backend</p>
</div>

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/PowerBotEntity.html" target="_self" >Promise&lt;PowerBotEntity&gt;</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getPollingTimer"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            getPollingTimer
                            </b>
                            <a href="#getPollingTimer"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>getPollingTimer(delay: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, tick: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="221" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:221</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Return observable polling timer-object</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>delay</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>0</code>
                                                        </td>

                                                        <td>
                                                                <p>The delay before timer dispatches first event</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>tick</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>50000</code>
                                                        </td>

                                                        <td>
                                                                <p>The intervall in which the timer dispatches it&#39;s event</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>TimerObservable&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isConnecting"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            isConnecting
                            </b>
                            <a href="#isConnecting"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>isConnecting()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="213" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:213</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="setAppEnv"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            setAppEnv
                            </b>
                            <a href="#setAppEnv"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>setAppEnv(type: <a href="../undefineds/AppEnv.html">AppEnv</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="178" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:178</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Set the api environent type to use</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>type</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#AppEnv" target="_self" >AppEnv</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>ConnectionType Enum</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="setServiceConfiguration"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            setServiceConfiguration
                            </b>
                            <a href="#setServiceConfiguration"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>setServiceConfiguration(config: <a href="../classes/Configuration.html">Configuration</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="164" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:164</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Apply passed service configuration to api-services</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>config</td>
                                                        <td>
                                                                    <code><a href="../classes/Configuration.html" target="_self" >Configuration</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="wrapApiServiceMethodes"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            wrapApiServiceMethodes
                            </b>
                            <a href="#wrapApiServiceMethodes"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>wrapApiServiceMethodes($service: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, errorFn: (error: Error) => void)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="270" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:270</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Wrap the methodes of an api-service, to catch errors</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>$service</td>
                                                        <td>
                                                                    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <h2 id="the-api-service-for-which-the-methods-should-be-wrapped">The api service for which the methods should be wrapped</h2>
<p>Refer to <a href="https://stackoverflow.com/questions/30881632/es6-iterate-over-class-methods">https://stackoverflow.com/questions/30881632/es6-iterate-over-class-methods</a>
and <a href="https://stackoverflow.com/questions/41452179/check-if-object-is-an-rxjs5-observable">https://stackoverflow.com/questions/41452179/check-if-object-is-an-rxjs5-observable</a>
and <a href="https://stackoverflow.com/questions/15094127/how-do-you-iterate-over-all-methods-in-a-javascript-pseudoclass-regardless-of-w">https://stackoverflow.com/questions/15094127/how-do-you-iterate-over-all-methods-in-a-javascript-pseudoclass-regardless-of-w</a></p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>errorFn</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="wrapMethode"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            wrapMethode
                            </b>
                            <a href="#wrapMethode"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>wrapMethode(fn: T, errorFn: (error: Error) => void)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="236" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:236</a></div>
                            </td>
                        </tr>

                        <tr>
                            <td class="col-md-4">
                                <b>Type parameters :</b>
                                <ul class="type-parameters">
                                        <li>T</li>
                                </ul>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>TODO: Wrap a api-service methode into a try-catch block
to switch to backup-server if request fails. This can be
used on any methode, the wrapper-function keeps arguments and</p>
<h2 id="return-types-intact-">return types intact.</h2>
<p>Refer to <a href="https://stackoverflow.com/questions/38598280/is-it-possible-to-wrap-a-function-and-retain-its-types">https://stackoverflow.com/questions/38598280/is-it-possible-to-wrap-a-function-and-retain-its-types</a></p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>fn</td>
                                                        <td>
                                                                    <code>T</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <p>The function to wrap</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>errorFn</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>T</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="_config"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            _config</b>
                            <a href="#_config"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/Configuration.html" target="_self" >Configuration</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:42</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$apollo"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $apollo</b>
                            <a href="#$apollo"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/FgGraphqlService.html" target="_self" >FgGraphqlService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="109" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:109</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot apollo-service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$auth"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $auth</b>
                            <a href="#$auth"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/AuthenticationService.html" target="_self" >AuthenticationService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="77" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:77</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot auth-service
( used to generate api keys )</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$contracts"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $contracts</b>
                            <a href="#$contracts"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/ContractService.html" target="_self" >ContractService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="81" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:81</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot contracts-objects service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$env"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $env</b>
                            <a href="#$env"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>environment</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:56</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provide contents of environment-file
for usage in the application</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$logs"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $logs</b>
                            <a href="#$logs"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/LogsService.html" target="_self" >LogsService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="85" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:85</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot logs-objects service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$market"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $market</b>
                            <a href="#$market"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/MarketService.html" target="_self" >MarketService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="89" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:89</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot market-objects service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$messages"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $messages</b>
                            <a href="#$messages"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/MessagesService.html" target="_self" >MessagesService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="93" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:93</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot message-objects service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$orders"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $orders</b>
                            <a href="#$orders"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/OrdersService.html" target="_self" >OrdersService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="97" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:97</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot order-object service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$signals"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $signals</b>
                            <a href="#$signals"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/SignalsService.html" target="_self" >SignalsService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="101" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:101</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot signal-objects service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="$trades"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            $trades</b>
                            <a href="#$trades"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/TradesService.html" target="_self" >TradesService</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="105" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:105</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Provides access to powerbot trade-object service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="allow"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            allow</b>
                            <a href="#allow"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>false</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="212" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:212</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="app"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            app</b>
                            <a href="#app"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/PowerBotEntity.html" target="_self" >PowerBotEntity</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new PowerBotEntity()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="51" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:51</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Represents the collected set of application-data
and provides access to it within powerbot-application</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="appSubscribtion"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            appSubscribtion</b>
                            <a href="#appSubscribtion"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subscription</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:64</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="pollingTimer$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Protected</span>
                            pollingTimer$</b>
                            <a href="#pollingTimer$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>TimerObservable&lt;any&gt;</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="60" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:60</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Member-variable to hold instance of
polling-timer observable</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

            <section>
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="configuration"></a>
                        <span class="name"><b>configuration</b><a href="#configuration"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>


                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>configuration(config)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="43" class="link-to-prism">src/app/service/pb-data/pb-data.service.ts:43</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                    <td>Optional</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>config</td>
                                                    
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
</section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { NGXLogger as FgLogService } from &#x27;ngx-logger&#x27;;
import { environment } from &#x27;./../../../environments/environment&#x27;;
import {
  AuthenticationService,
  SignalsService,
  ContractService,
  LogsService,
  MarketService,
  MessagesService,
  OrdersService,
  TradesService,
  Configuration,
  MarketStatus
} from &#x27;../../module/pb-api&#x27;;
import {
  SignalEntityInterface,
  ContractEntityInterface,
  LogEntityInterface,
  MarketEntityInterface,
  MessageEntityInterface,
  OrderEntityInterface,
  TradeEntityInterface
} from &#x27;../../interface/interface.export&#x27;;
import {
  OrderEntity,
  PowerBotEntity
 } from &#x27;../../entity/entity.export&#x27;;
import { TimerObservable } from &#x27;rxjs/observable/TimerObservable&#x27;;
import { ConnectionState, AppEnv, RequestState } from &#x27;../../entity/app-state.entity&#x27;;
import { PbAppEntityConst } from &#x27;../../app.const&#x27;;
import { Observable, Subscription, Subject, combineLatest } from &#x27;rxjs&#x27;;
import { FgGraphqlService } from &#x27;src/app/module/fg-graphql/service/fg-graphql/fg-graphql.service&#x27;;
import gql from &#x27;graphql-tag&#x27;;
/**
 * DataService -
 * Service providing interface to fetch, access and
 * handle data within application
 */
 @Injectable()
export class PbDataService {
  protected _config: Configuration;
  public set configuration( config: Configuration) {
    this._config &#x3D; config;
    this.setServiceConfiguration( this._config );
  }
  /**
   * Represents the collected set of application-data
   * and provides access to it within powerbot-application
   */
  public app: PowerBotEntity &#x3D; new PowerBotEntity();
  /**
   * Provide contents of environment-file
   * for usage in the application
   */
  public $env &#x3D; environment;
  /** Member-variable to hold instance of
   * polling-timer observable
   */
  protected pollingTimer$: TimerObservable&lt;any&gt;;
  /**
   *
   */
  protected appSubscribtion: Subscription;
  /**
   * Constructor
   */
  constructor(
    /**
     * Provides client-application log-service
     */
    protected $log: FgLogService,
    /**
     * Provides access to powerbot auth-service
     * ( used to generate api keys )
     */
    public $auth: AuthenticationService,
    /**
     * Provides access to powerbot contracts-objects service
     */
    public $contracts: ContractService,
    /**
     * Provides access to powerbot logs-objects service
     */
    public $logs: LogsService,
    /**
     * Provides access to powerbot market-objects service
     */
    public $market: MarketService,
    /**
     * Provides access to powerbot message-objects service
     */
    public $messages: MessagesService,
    /**
     * Provides access to powerbot order-object service
     */
    public $orders: OrdersService,
    /**
     * Provides access to powerbot signal-objects service
     */
    public $signals: SignalsService,
    /**
     * Provides access to powerbot trade-object service
     */
    public $trades: TradesService,
    /**
     * Provides access to powerbot apollo-service
     */
    public $apollo: FgGraphqlService,
  ) {
    this.$apollo.createClient(this.$env.powerbot);
    const errorFn &#x3D; error &#x3D;&gt; {
      // Only perform error-handling if connection-state isn&#x27;t Offline
      // so validation can use wrapped services
      if ( this.app.state.connectionState !&#x3D;&#x3D; ConnectionState.Offline
          &amp;&amp; this.app.state.connectionState !&#x3D;&#x3D; ConnectionState.Warning
          &amp;&amp; this.app.state.appEnv &#x3D;&#x3D;&#x3D; AppEnv.Live_Prod
        ) {
          this.$log.warn( &#x27;Switch to Backup-Server&#x27; );
          // Disconnect from Production-Server
          this.disconnect();
          // If request fails in production-environment, try connecting
          // to backup-environment
          this.app.state.connectionState &#x3D; ConnectionState.Warning;
          this.app.state.appEnv &#x3D; AppEnv.Live_Backup;
          this.setAppEnv(this.app.state.appEnv);
          // Try to connect to backup-server
          this.connect( AppEnv.Live_Backup );
          // TODO: Implement methode that tries to reconnect to production-environment
          // after a random time between 5 and 10 minutes
          const delay &#x3D; Math.floor(Math.random() * 600000);
          console.log( delay );
          setTimeout(() &#x3D;&gt; {
            this.disconnect();
            this.app.state.appEnv &#x3D; AppEnv.Live_Prod;
            this.connect( AppEnv.Live_Prod );
          }, delay );
      } else {
        this.app.state.requestState &#x3D; RequestState.Inactive;
        this.app.state.connectionState &#x3D; ConnectionState.Error;
        // this.$log.error(&#x27;ERRROR&#x27;);
        // console.log(error);
        // Rethrow erros for connection-state offline
        // throw error;
      }
    };
    // Decorate services to call errorFn on error
    this.$auth &#x3D; this.wrapApiServiceMethodes( $auth, errorFn );
    this.$contracts &#x3D; this.wrapApiServiceMethodes( $contracts, errorFn );
    this.$market &#x3D; this.wrapApiServiceMethodes( $market, errorFn );
    this.$messages &#x3D; this.wrapApiServiceMethodes( $messages, errorFn );
    this.$orders &#x3D; this.wrapApiServiceMethodes( $orders, errorFn );
    this.$signals &#x3D; this.wrapApiServiceMethodes( $signals, errorFn );
    this.$trades &#x3D; this.wrapApiServiceMethodes( $trades, errorFn );
    // Override api-service configuration with empty config
    // to prevent services to use hard-coded test-environment
    // before ConnectionType is explicitly set
    this.setAppEnv( AppEnv.Offline );
    this.$apollo.testRestQuery();
  }
  /**
   * Apply passed service configuration to api-services
   */
  protected setServiceConfiguration( config: Configuration ) {
    this.$auth.configuration &#x3D; config;
    this.$contracts.configuration &#x3D; config;
    this.$logs.configuration &#x3D; config;
    this.$market.configuration &#x3D; config;
    this.$messages.configuration &#x3D; config;
    this.$orders.configuration &#x3D; config;
    this.$signals.configuration &#x3D; config;
    this.$trades.configuration &#x3D; config;
  }
  /**
   * Set the api environent type to use
   * @param type  ConnectionType Enum
   */
  protected setAppEnv( type: AppEnv ) {
    let configuration: Configuration &#x3D; new Configuration();
    try {
      switch ( type ) {
        case AppEnv.Live_Prod:
          this.app.state.appEnv &#x3D; AppEnv.Live_Prod;
          configuration.apiKeys &#x3D; { &#x27;api_key&#x27;: this.app.config.prodConfig.apiKey };
          configuration.basePath &#x3D; this.app.config.prodConfig.serverUrl;
          break;
        case AppEnv.Live_Backup:
          this.app.state.appEnv &#x3D; AppEnv.Live_Backup;
          configuration.apiKeys &#x3D; { &#x27;api_key&#x27;: this.app.config.prodConfig.apiKey };
          configuration.basePath &#x3D; this.app.config.prodConfig.backupUrl;
          break;
        case AppEnv.Live_Test:
          this.app.state.appEnv &#x3D; AppEnv.Live_Test;
          configuration.apiKeys &#x3D; { &#x27;api_key&#x27;: this.app.config.testConfig.apiKey };
          configuration.basePath &#x3D; this.app.config.testConfig.serverUrl;
          break;
        default:
          this.app.state.appEnv &#x3D; AppEnv.Offline;
          configuration.apiKeys &#x3D; { &#x27;api_key&#x27;: PbAppEntityConst.NOT_SET };
          configuration.basePath &#x3D; PbAppEntityConst.NOT_SET;
        break;
      }
      this.$log.warn( &#x27;SET CONFIGURATION&#x27; );
      console.log(this.app);
      console.log(configuration);
      // Set api-services configuration
      this.configuration &#x3D; configuration;
    } catch ( error ) {
      this.$log.warn( &#x27;Api-server environment not available!&#x27; );
    }
  }
  protected allow: boolean &#x3D; false;
  public isConnecting(): boolean {
    return this.allow;
  }
  /**
   * Return observable polling timer-object
   * @param delay The delay before timer dispatches first event
   * @param tick The intervall in which the timer dispatches it&#x27;s event
   */
  protected getPollingTimer( delay: number &#x3D; 0, tick: number &#x3D; 50000 ): TimerObservable&lt;any&gt; {
    if (!this.pollingTimer$) {
      this.pollingTimer$ &#x3D; TimerObservable.create(delay, tick);
    }
    return  this.pollingTimer$;
  }
  /**
   * TODO: Wrap a api-service methode into a try-catch block
   * to switch to backup-server if request fails. This can be
   * used on any methode, the wrapper-function keeps arguments and
   * return types intact.
   * ----------------------
   * Refer to https://stackoverflow.com/questions/38598280/is-it-possible-to-wrap-a-function-and-retain-its-types
   * @param fn The function to wrap
   */
   protected wrapMethode&lt;T extends Function&gt;(fn: T, errorFn: (error: Error) &#x3D;&gt; void): T {
    return &lt;any&gt;function (args) {
      try {
        const returnType &#x3D; fn(args);
        if ( returnType instanceof Observable ) {
          // Return type is Observable
          const subscribtion: Subscription &#x3D; returnType.subscribe(
            value &#x3D;&gt; {
              // do nothing
            },
            err &#x3D;&gt; {
              subscribtion.unsubscribe();
              errorFn(err);
            });
          } else if ( returnType instanceof Promise ) {
            // Returntype is Promise
            returnType.catch( err &#x3D;&gt; {
              errorFn(err);
          });
        }
        return returnType;
      } catch ( error  ) {
        errorFn(error);
      }
    };
  }
  /**
   * Wrap the methodes of an api-service, to catch errors
   * @param $service The api service for which the methods should be wrapped
   * ----------------------
   * Refer to https://stackoverflow.com/questions/30881632/es6-iterate-over-class-methods
   * and https://stackoverflow.com/questions/41452179/check-if-object-is-an-rxjs5-observable
   * and https://stackoverflow.com/questions/15094127/how-do-you-iterate-over-all-methods-in-a-javascript-pseudoclass-regardless-of-w
   */
   protected wrapApiServiceMethodes($service: any, errorFn: (error: Error) &#x3D;&gt; void ): any {
    Object.getOwnPropertyNames( Object.getPrototypeOf( $service ) ).forEach( fnKey &#x3D;&gt; {
      if ( fnKey !&#x3D;&#x3D; &#x27;constructor&#x27; ) {
        $service[fnKey] &#x3D; this.wrapMethode($service[fnKey].bind($service), errorFn);
      }
    } );
    return $service;
  }
  /**
   * Connect application-data service
   */
  public connect( env: AppEnv ): void {
    this.allow &#x3D; true;
    this.setAppEnv( env );
    this.appSubscribtion &#x3D; this.getPollingTimer().subscribe(() &#x3D;&gt; {
      this.fetchApplicationData();
    });
  }
  /**
   * Disconnect application-data service
   */
  public disconnect(): void {
    this.allow &#x3D; false;
    this.appSubscribtion.unsubscribe();
    this.app.state.appEnv &#x3D; AppEnv.Offline;
    this.app.state.connectionState &#x3D; ConnectionState.Offline;
    this.app.state.requestState &#x3D; RequestState.Inactive;
  }
  /**
   * Fetch full set of application-data from backend
   */
  protected async fetchApplicationData(): Promise&lt;PowerBotEntity&gt; {
    // If connection-state wasn&#x27;t initialized set to loading, oterwise keep previous state
    if (this.app.state.connectionState &#x3D;&#x3D;&#x3D; ConnectionState.Offline ) {
      this.app.state.connectionState &#x3D; ConnectionState.Connecting;
    }
    this.app.state.requestState &#x3D; RequestState.Active;
    const subject: Subject&lt;PowerBotEntity&gt; &#x3D; new Subject();
    this.$market.getStatus().subscribe( ( status: MarketStatus ) &#x3D;&gt; {
      console.log( &#x27;MARKETSTATUS&#x27; );
      console.log( status );
    });
    const data$ &#x3D; combineLatest([
      this.$market.getStatus(),
      this.$orders.getOrderBooks( &#x27;&#x27;, false, undefined, undefined, undefined, undefined, undefined, 3 ),
      this.$logs.getLogs(),
      this.$messages.getMessages(),
      this.$orders.getOwnOrders(),
      this.$signals.getSignals(),
      this.$trades.getTrades(),
    ]);
    data$.subscribe(
      ([
        marketState,
        orderBook,
        logs,
        messages,
        orders,
        signals,
        trades
      ]) &#x3D;&gt; {
          if ( this.app.state.connectionState !&#x3D;&#x3D; ConnectionState.Offline ) {
          // Set values and loading state
          this.app.market &#x3D; marketState;
          // this.app.config.deliverArea &#x3D; marketState.delivery_area_id;
          this.app.orderbook &#x3D; orderBook;
          this.app.contracts &#x3D; orderBook.contracts;
          this.app.products &#x3D; orderBook.products;
          this.app.logs &#x3D; logs;
          this.app.messages &#x3D; messages;
          this.app.orders &#x3D; orders;
          // this.app.signals &#x3D; this.prepareSignalResponse( signals );
          this.app.trades &#x3D; trades;
          this.app.state.connectionState &#x3D; ConnectionState.Online;
          this.app.state.requestState &#x3D; RequestState.Inactive;
          subject.next(this.app);
          console.log(&#x27;this.app&#x27;);
          console.log(this.app);
        }
      }
    );
    return subject.toPromise&lt;PowerBotEntity&gt;();
  }
  // public prepareSignalResponse( signals: SignalEntityInterface[] ): any[] {
  //   let keys: string[] &#x3D; [];
  //   let signalsObjects: { label: string, values: any[] }[] &#x3D; [];
  //   signals.forEach( signal &#x3D;&gt; {
  //     let index &#x3D; keys.indexOf( signal.source );
  //     // If key isn&#x27;t found in key array, prepare
  //     // signalObject to hold signal-data
  //     if ( index &#x3D;&#x3D;&#x3D; -1) {
  //       keys.push( signal.source );
  //       let signalObject &#x3D; {
  //         label: signal.source,
  //         values: []
  //       }
  //       // Push signal data to signalObject
  //       signalObject.values.push( signal );
  //       // Push signalObjects to signalObjects-array
  //       signalsObjects.push( signalObject );
  //     } else {
  //       // If key was found just push signal to according signalsObject
  //       signalsObjects[index].values.push( signal );
  //     }
  //   });
  //   return signalsObjects;
  // }
}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'PbDataService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
